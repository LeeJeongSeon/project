<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="join">
	<select id="joinList" resultType="joinDTO">
		select ej_num, max(ej_people) ej_join_p 
		from event_join 
		group by ej_num
		order by ej_num
	</select>
	
	<select id="joinDetail" resultType="joinDTO">
		select e_num ej_num, e_instr ej_instr, e_name ej_name, e_max_p ej_max_p, e_genre ej_genre
		, (select max(ej_people) from event_join where ej_num=#{ej_num}) e_join_p
		from event
		where e_num=#{ej_num}
	</select>
</mapper>
